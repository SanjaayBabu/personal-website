(()=>{var e={};e.id=872,e.ids=[872],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6273:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>v,routeModule:()=>m,serverHooks:()=>f,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>w});var s={};t.r(s),t.d(s,{GET:()=>d});var a=t(6559),n=t(8088),i=t(7719),o=t(9021),u=t.n(o),p=t(3873),c=t.n(p),g=t(2190);let l=c().join(process.cwd(),"content","writing");async function d(e){try{let r=new URL(e.url),t=r.searchParams.get("slug"),s=r.searchParams.get("img");if(!t||!s)return g.NextResponse.json({error:"Missing slug or img query"},{status:400});let a=decodeURIComponent(s),n=[c().join(l,t,a),c().join(l,a)],i=null;for(let e of n){let r=c().normalize(e),t=c().relative(l,r);if(!(t.startsWith("..")||c().isAbsolute(t)&&!r.startsWith(l))&&u().existsSync(r)&&u().statSync(r).isFile()){i=r;break}}if(!i)return g.NextResponse.json({error:"Image not found"},{status:404});let o=u().readFileSync(i),p=c().extname(i),d=function(e){switch(e.toLowerCase()){case".jpg":case".jpeg":return"image/jpeg";case".png":return"image/png";case".gif":return"image/gif";case".webp":return"image/webp";case".svg":return"image/svg+xml";case".avif":return"image/avif";default:return"application/octet-stream"}}(p),m=new Headers;return m.set("Content-Type",d),m.set("Cache-Control","public, max-age=31536000, immutable"),new g.NextResponse(o,{status:200,headers:m})}catch(e){return console.error("Error serving writing image:",e),g.NextResponse.json({error:"Internal server error"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/writing/image/route",pathname:"/api/writing/image",filename:"route",bundlePath:"app/api/writing/image/route"},resolvedPagePath:"/Users/sanjaaybabu/Desktop/test website/app/api/writing/image/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:x,workUnitAsyncStorage:w,serverHooks:f}=m;function v(){return(0,i.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:w})}},6487:()=>{},8335:()=>{},9021:e=>{"use strict";e.exports=require("fs")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,580],()=>t(6273));module.exports=s})();